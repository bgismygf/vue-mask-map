(function(t){function a(a){for(var s,r,o=a[0],c=a[1],l=a[2],d=0,u=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);p&&p(a);while(u.length)u.shift()();return n.push.apply(n,l||[]),e()}function e(){for(var t,a=0;a<n.length;a++){for(var e=n[a],s=!0,o=1;o<e.length;o++){var c=e[o];0!==i[c]&&(s=!1)}s&&(n.splice(a--,1),t=r(r.s=e[0]))}return t}var s={},i={app:0},n=[];function r(a){if(s[a])return s[a].exports;var e=s[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=s,r.d=function(t,a,e){r.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,a){if(1&a&&(t=r(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var s in t)r.d(e,s,function(a){return t[a]}.bind(null,s));return e},r.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(a,"a",a),a},r.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},r.p="/vue-mask-map/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=a,o=o.slice();for(var l=0;l<o.length;l++)a(o[l]);var p=c;n.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"4ffd":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABHNCSVQICAgIfAhkiAAAA61JREFUSEvtllFoW2UUx//nuzddbZuknVXX1kkrOF/moxOFVftghSEijCoo6phy6YOUKiRNRcpVZlM6mMj2YnDsQVeVyQp7UGFo9qCbivNBbGGjGtfaZFWKMWs3k9z7/eUmtEtHm9v1wQnuez7n+53//5x77ie4QUduEBc3wf+a8/9Rq21bIY1ahBYEuVwBiUTRzxJaCMyF7qgpugF9+O3f8jagV8tZVXFdNNpqwHjUUOgC5S4ABsDfAZxx6H62kEqdx7Fj7tKFtGHOFtq2K8PcRcj9InIriYIAPwvdk67rJu+Mz85XFrASbFmBcHjzk6IkBuA+AKaILMfQq56cBnkoe2XxEA4ezKft1mbtbnpFgD0i2AKIWgaQJJAX8Bvt6n1tNdNJscsOXAVbViDU1NyrwDcANFYCKyst38Wj2ULeuhgeC9K95R1A7aYgsGYbvBzBLKD7E29eGPfsXwYHI5HHDRU4IoLman0kkKGWJ07XvfVjk9sRh0if54xf71GCM0WHPW3DF34og2OxpkbKcQAPr6XUCyupJcayqam96W3f7oBhjgPVC11RUMktvL+YTVklcDgS6xYlx0Wk3keto7Wz99XR0aPWUPsBUPpQMQO+qku9ZRp0u0vgUGRgSCllV1NbVoysdnT32WDiXJ0b+lxEPbge2DUxDqmfKyseGHxPibzofwkzjuCRiU0fLJjaTAKyzT/nmgiSAkTL4Nhr7yrAWsclGUc7Xb+YH+eKhkpC5N515KwMIampI0uKYwIM+1oN5LR2HpuqO/KT4zZ8CpGd1w9GUeg8UwI3DAx0mmKcECBcdbhIl5q92f0jhy8OtcdJiV7vcAGcps6XhwvRaLBR1IeA7PL7nAiM/zWXeTbd9sV2UeYJirSsXzW1kIktc7/2VSyQwZ2GwhiAtqpwcN5xsftSffzrtG5/HVCDAtT4wssbb1Ic/VRLfHry6sq0bRVa/PtpZch+EK3VVmZJtVt8/s+GTwJXHIxAyQuA1FZdmcAU6Lzcsm/mpADeZFecnh6joeOeTkMxJpCHQNYvFVDaWiJFkJOaOJDLzn/k/Sbn7c2hfDH4EpXqFZEOkMZy38s7+hLIL52iO7x1ZOZ7D+oRV38I9Pc3hgO1O2CoTmjeDYEhYIZQp4t0vro8Oprx9slSybShZpytHYaoLoF6AILbQBQAfU4TyRrz8ne3238sVGr0f4F4j4GJCan8//qsVYEF89R5sOsUnLVi/cG+U7OxgJvgjfm2gaz/n9X/AGxNmdCr0X+xAAAAAElFTkSuQmCC"},"56d7":function(t,a,e){"use strict";e.r(a);e("e260"),e("e6cf"),e("cca6"),e("a79d");var s=e("2b0e"),i=e("bc3a"),n=e.n(i),r=e("a7fe"),o=e.n(r),c=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[t._m(0),e("div",{staticClass:"container pt-3"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-12 col-md-10 col-lg-5"},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-6"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectCity,expression:"selectCity"}],staticClass:"form-control text-main",attrs:{id:"inputState"},on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.selectCity=a.target.multiple?e:e[0]},function(a){return t.changeData()}]}},[e("option",{attrs:{disabled:"",value:""}},[t._v("全部縣市")]),t._l(t.taiwanCityData,(function(a,s){return e("option",{key:s,domProps:{value:a.CityName}},[t._v(" "+t._s(a.CityName)+" ")])}))],2)]),e("div",{staticClass:"form-group col-6"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectArea,expression:"selectArea"}],staticClass:"form-control text-main",attrs:{id:"inputState"},on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.selectArea=a.target.multiple?e:e[0]},function(a){return t.changeData()}]}},[e("option",{attrs:{disabled:"",value:""}},[t._v("全部區域")]),t._l(t.area,(function(a,s){return e("option",{key:s,domProps:{value:a.AreaName}},[t._v(" "+t._s(a.AreaName)+" ")])}))],2)])]),e("div",{staticClass:"pl-2"},[e("span",{staticClass:"h2 mr-2 font-w-bold text-main"},[t._v("口罩實名制")]),e("span",{staticClass:"mr-2 text-main"},[t._v("購買日")]),t._m(1),e("div",{staticClass:"d-flex mt-3 mb-3"},[e("div",{staticClass:"mr-auto text-main"},[t.updated?e("h6",{staticClass:"small"},[t._v("資訊更新時間 "+t._s(t.updated))]):t._e()]),e("button",{staticClass:"btn btn-outline-main rounded-pill align-self-center px-3",attrs:{type:"button"},on:{click:function(a){return t.getPharmacyData()}}},[t.status.refreshIcon?e("i",{staticClass:"fas fa-cog fa-spin fa-lg"}):t._e(),t._v(" 重整列表 ")])])]),e("div",{staticClass:"scroll-content px-2 pt-1"},[t._l(t.pharmacyDataFilter,(function(a,s){return e("div",{key:s},[s+1<=t.piece?e("div",{staticClass:"jq-card b-radius-10px card-shadow bg-white pt-3 pb-1 px-3 mb-4"},[e("a",{staticClass:"text-decoration-none",attrs:{href:"#"},on:{click:function(e){return t.updateMarker(a)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6",staticStyle:{"padding-right":"7.5px"}},[e("div",{staticClass:"b-radius-10px text-white py-2 pl-2 position-relative",class:{"bg-many":a.properties.mask_adult>=100,"bg-median":a.properties.mask_adult<=99,"bg-small":0==a.properties.mask_adult}},[e("p",{staticClass:"small mb-0"},[t._v("成人口罩數量")]),e("div",{staticClass:"d-inline-block align-middle"},[e("span",{staticClass:"h2"},[t._v(t._s(a.properties.mask_adult))]),e("span",{staticClass:"small"},[t._v("片")])]),e("i",{staticClass:"fas align-middle icon-control\n                      position-absolute",class:{"fa-check-circle":a.properties.mask_adult>=100,"fa-exclamation-circle":a.properties.mask_adult<=99,"fa-times-circle":0==a.properties.mask_adult}})])]),e("div",{staticClass:"col-6",staticStyle:{"padding-left":"7.5px"}},[e("div",{staticClass:"b-radius-10px text-white py-2 pl-2 position-relative",class:{"bg-many":a.properties.mask_child>=100,"bg-median":a.properties.mask_child<=99,"bg-small":0==a.properties.mask_child}},[e("p",{staticClass:"small mb-0"},[t._v("兒童口罩數量")]),e("div",{staticClass:"d-inline-block align-middle"},[e("span",{staticClass:"h2"},[t._v(t._s(a.properties.mask_child))]),e("span",{staticClass:"small"},[t._v("片")])]),e("i",{staticClass:"fas align-middle icon-control\n                      position-absolute",class:{"fa-check-circle":a.properties.mask_child>=100,"fa-exclamation-circle":a.properties.mask_child<=99,"fa-times-circle":0==a.properties.mask_child}})])])]),e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-12"},[e("a",{attrs:{href:"#"}}),e("span",{staticClass:"font-weight-bold h6 mr-1 mb-1 text-main"},[t._v(" "+t._s(s+1)+"."+t._s(a.properties.name)+" ")]),e("table",{staticClass:"table"},[e("tbody",{staticClass:"small"},[e("tr",[e("td",{staticClass:"font-weight-bold text-main",attrs:{scope:"col",width:"10%"}},[t._v("地址")]),e("td",{staticClass:"text-small",attrs:{scope:"col",width:"50%"}},[t._v(" "+t._s(a.properties.address)+" ")]),e("td",{staticClass:"text-right",attrs:{scope:"col",width:"30%"}},[e("a",{staticClass:"text-small",attrs:{href:"https://www.google.com.tw/maps/place/"+a.properties.address,target:"_blank"}},[t._v("於地圖查看")])])]),e("tr",[e("td",{staticClass:"font-weight-bold text-main"},[t._v("電話")]),e("td",{staticClass:"text-small"},[t._v(t._s(a.properties.phone))]),e("td",{staticClass:"text-right"},[e("a",{staticClass:"text-small",attrs:{href:"tel:"+a.properties.phone}},[t._v("撥打電話")])])]),e("tr",[e("td",{staticClass:"font-weight-bold text-main"},[t._v("備註")]),e("td",{staticClass:"text-small",attrs:{colspan:"2"}},[t._v(t._s(a.properties.note))])])])])])])])]):t._e()])})),e("div",{staticClass:"d-flex justify-content-center"},[t.status.icon?e("i",{staticClass:"fas fa-spinner fa-spin fa-lg"}):t._e()])],2)]),t._m(2)])])])},l=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("nav",{staticClass:"navbar navbar-expand-lg bg-white"},[s("div",{staticClass:"container"},[s("a",{staticClass:"navbar-brand font-w-bold nav-logo",attrs:{href:"#"}},[s("img",{attrs:{src:e("4ffd"),alt:""}}),s("h1",{staticClass:"h5 d-inline-block font-w-bold align-middle mb-0 ml-2"},[t._v("口罩即時查")])]),s("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[s("span",{staticClass:"navbar-toggler-icon"})]),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[s("ul",{staticClass:"navbar-nav ml-auto"},[s("li",{staticClass:"nav-item mr-3"},[s("a",{staticClass:"nav-link text-main active",attrs:{href:"#"}},[t._v("口罩供給現況 "),s("span",{staticClass:"sr-only"},[t._v("(current)")])])])])])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",{attrs:{href:"#"}},[e("i",{staticClass:"fas fa-question-circle fa-lg text-muted"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-lg-7"},[e("div",{staticClass:"d-none d-lg-block",staticStyle:{height:"calc(100vh - 115px)"},attrs:{id:"map"}})])}],p=(e("99af"),e("4de4"),e("4160"),e("d81d"),e("c96a"),e("159b"),e("1157")),d=e.n(p),u=e("e11e"),m=e.n(u),f={},v={name:"App",data:function(){return{pharmacyData:{},taiwanCityData:{},selectCity:"",selectArea:"",showData:{},citydata:{},piece:10,updated:"",status:{icon:!1,refreshIcon:!1},quantityColor:{many:"bg-many",median:"bg-median",small:"bg-small"}}},methods:{getPharmacyData:function(){var t=this,a="https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json?fbclid=IwAR1dnONo5ndjbYoiQOHymhawhbnRDFKmWVjQT4A5gV5Wo4zccyBvp0peAgk";this.status.refreshIcon=!0,this.$http.get(a).then((function(a){t.pharmacyData=a.data.features,t.status.refreshIcon=!1}))},getTaiwanCityData:function(){var t=this,a="https://raw.githubusercontent.com/donma/TaiwanAddressCityAreaRoadChineseEnglishJSON/master/CityCountyData.json";this.$http.get(a).then((function(a){t.taiwanCityData=a.data}))},bindPopupColor:function(t){var a;return 0===t?this.quantityColor.small:t>=100?this.quantityColor.many:t<=99?this.quantityColor.median:a},updateMarker:function(t){this.removeMapMarker();var a=this.bindPopupColor(t.properties.mask_adult),e=this.bindPopupColor(t.properties.mask_child);f.panTo(new m.a.LatLng(t.geometry.coordinates[1],t.geometry.coordinates[0])),m.a.marker([t.geometry.coordinates[1],t.geometry.coordinates[0]]).addTo(f).bindPopup('<div class="d-flex justify-content-center text-white">\n      <div class="'.concat(a,' p-1 mr-1 rounded">').concat(t.properties.mask_adult,'</div><div class="').concat(e,' p-1 rounded">').concat(t.properties.mask_child,"</div></div>")).openPopup(),this.updated=t.properties.updated},removeMapMarker:function(){f.eachLayer((function(t){t instanceof m.a.Marker&&f.removeLayer(t)}))},changeData:function(){this.piece=10,d()(".scroll-content").scrollTop(0)}},computed:{area:function(){var t=this;if(""!==t.selectCity){t.selectArea="";var a=t.taiwanCityData.filter((function(a){return a.CityName===t.selectCity}));return a[0].AreaList}return t.selectArea="",{}},pharmacyDataFilter:function(){var t=this;return""!==t.selectCity&&""!==t.selectArea?t.pharmacyData.filter((function(a){return a.properties.town===t.selectArea&&a.properties.county===t.selectCity})):""!==t.selectCity?t.pharmacyData.filter((function(a){return a.properties.county===t.selectCity})):t.pharmacyData}},mounted:function(){var t=this;f=m.a.map("map",{center:[25.03,121.55],minZoom:8,maxZoom:18,zoom:16,zoomControl:!0,attributionControl:!1}),m.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(f),d()(".scroll-content").scroll((function(){var a=document.querySelectorAll(".jq-card"),e=0,s=30*t.piece,i=d()(".scroll-content").scrollTop(),n=d()(".scroll-content").height()+5;a.forEach((function(t){e+=t.offsetHeight}));var r=e+s+5,o=r-n;t.piece!==t.pharmacyDataFilter.length&&i===o&&(t.status.icon=!0,setTimeout((function(){t.status.icon=!1,t.piece+=10}),1500))}))},created:function(){this.getPharmacyData(),this.getTaiwanCityData()}},h=v,C=(e("5c0b"),e("2877")),g=Object(C["a"])(h,c,l,!1,null,null,null),b=g.exports;e("4989");s["a"].use(o.a,n.a),s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(b)}}).$mount("#app")},"5c0b":function(t,a,e){"use strict";var s=e("9c0c"),i=e.n(s);i.a},"9c0c":function(t,a,e){}});
//# sourceMappingURL=app.810767a9.js.map